<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name=description content=""><meta name=author content="Zachary Snow"><title>Drawing 2D Lines as Rotated Quads</title><base href=../../ ><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet type=text/css href=css/style.css><link rel=alternate type=application/rss+xml title="The Blog of Zachary Snow" href=feed.rss><div class=wrap><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class=navbar-brand href=/ >The Blog of Zachary Snow</a></h1><button id=navbar-toggler class=navbar-toggler type=button aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=index.html>Home</a><li class=nav-item><a class=nav-link href=about.html>About</a></ul><div class="social my-2 my-lg-0"><a href=https://twitter.com/smack0007 class=twitter title=Twitter><span class=icon-twitter></span></a> <a href=https://github.com/smack0007 class=github title=Github><span class=icon-github></span></a> <a href=https://paypal.me/smack0007 class=coffee title="Buy Me a Coffee"><span class=icon-mug></span></a> <a href=feed.rss class=rss title=RSS><span class=icon-rss></span></a></div></div></nav><main class=container><div class=posts><div class=post><h2><a href=blog/2009/drawing-2d-lines-as-rotated-quads.html>Drawing 2D Lines as Rotated Quads</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 07, 2009</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span></span></div><div class=content><p>I haven't had much time lately with work but one question I've seen asked many many times is how to draw lines of different widths. So, to cut to the chase I'll share the code I've used to do it.
<pre><code class=language-c#><span class=HtmlSyntaxHighlighterDotNet><span class="keyword keyword-public">public</span> <span class="keyword keyword-void">void</span> <span class="identifier identifier-method">DrawLine</span><span class=token>(</span><span class="identifier identifier-method">Vector3</span> <span class="identifier identifier-method">p1</span><span class=token>,</span> <span class="identifier identifier-method">Color</span> <span class="identifier identifier-method">c1</span><span class=token>,</span> <span class="identifier identifier-method">Vector3</span> <span class="identifier identifier-method">p2</span><span class=token>,</span> <span class="identifier identifier-method">Color</span> <span class="identifier identifier-method">c2</span><span class=token>,</span> <span class="keyword keyword-int">int</span> <span class="identifier identifier-method">width</span><span class=token>)</span>
<span class=token>{</span>
	<span class="keyword keyword-float">float</span> <span class="identifier identifier-variable">distance</span> <span class=token>=</span> <span class="identifier identifier-invocation">Vector3</span><span class=token>.</span><span class="identifier identifier-invocation">Distance</span><span class=token>(</span><span class="identifier identifier-invocation">p1</span><span class=token>,</span> <span class="identifier identifier-invocation">p2</span><span class=token>)</span><span class=token>;</span>
	<span class="keyword keyword-float">float</span> <span class="identifier identifier-variable">halfDistance</span> <span class=token>=</span> <span class="identifier identifier-variable">distance</span> <span class=token>/</span> <span class="numeric numeric-literal">2.0f</span><span class=token>;</span>
	<span class="keyword keyword-float">float</span> <span class="identifier identifier-variable">halfWidth</span> <span class=token>=</span> <span class="identifier identifier-variable">width</span> <span class=token>/</span> <span class="numeric numeric-literal">2.0f</span><span class=token>;</span>

	<span class="identifier identifier-variable">Vector3</span> <span class="identifier identifier-variable">difference</span> <span class=token>=</span> <span class="identifier identifier-variable">p2</span> <span class=token>-</span> <span class="identifier identifier-variable">p1</span><span class=token>;</span>
	<span class="identifier identifier-variable">Vector3</span> <span class="identifier identifier-variable">destination</span> <span class=token>=</span> <span class="keyword keyword-new">new</span> <span class="identifier identifier-variable">Vector3</span><span class=token>(</span><span class="identifier identifier-member-access">p1</span><span class=token>.</span><span class="identifier identifier-member-access">X</span> <span class=token>+</span> <span class="identifier identifier-member-access">difference</span><span class=token>.</span><span class="identifier identifier-member-access">X</span> <span class=token>/</span> <span class="numeric numeric-literal">2.0f</span><span class=token>,</span> <span class="identifier identifier-member-access">p1</span><span class=token>.</span><span class="identifier identifier-member-access">Y</span> <span class=token>+</span> <span class="identifier identifier-member-access">difference</span><span class=token>.</span><span class="identifier identifier-member-access">Y</span> <span class=token>/</span> <span class="numeric numeric-literal">2.0f</span><span class=token>,</span> <span class="identifier identifier-member-access">p1</span><span class=token>.</span><span class="identifier identifier-member-access">Z</span> <span class=token>+</span> <span class="identifier identifier-member-access">difference</span><span class=token>.</span><span class="identifier identifier-member-access">Z</span><span class=token>)</span><span class=token>;</span>

	<span class=comment>// Calculate angle between two points</span>
	<span class="keyword keyword-float">float</span> <span class="identifier identifier-variable">angle</span> <span class=token>=</span> <span class=token>(</span><span class="keyword keyword-float">float</span><span class=token>)</span><span class="identifier identifier-invocation">Math</span><span class=token>.</span><span class="identifier identifier-invocation">Atan2</span><span class=token>(</span><span class="identifier identifier-invocation">difference</span><span class=token>.</span><span class="identifier identifier-invocation">Y</span><span class=token>,</span> <span class="identifier identifier-invocation">difference</span><span class=token>.</span><span class="identifier identifier-invocation">X</span><span class=token>)</span><span class=token>;</span>

	<span class="identifier identifier-variable">Vector3</span> <span class="identifier identifier-variable">v1</span><span class=token>,</span> <span class="identifier identifier-variable">v2</span><span class=token>,</span> <span class="identifier identifier-variable">v3</span><span class=token>,</span> <span class="identifier identifier-variable">v4</span><span class=token>;</span>

	<span class=identifier>v1</span> <span class=token>=</span> <span class="keyword keyword-new">new</span> <span class=identifier>Vector3</span><span class=token>(</span><span class=token>-</span><span class=identifier>halfDistance</span><span class=token>,</span> <span class=token>-</span><span class=identifier>halfWidth</span><span class=token>,</span> <span class="numeric numeric-literal">0</span><span class=token>)</span><span class=token>;</span> <span class=comment>// Top Left</span>
	<span class=identifier>v2</span> <span class=token>=</span> <span class="keyword keyword-new">new</span> <span class=identifier>Vector3</span><span class=token>(</span><span class=identifier>halfDistance</span><span class=token>,</span> <span class=token>-</span><span class=identifier>halfWidth</span><span class=token>,</span> <span class="numeric numeric-literal">0</span><span class=token>)</span><span class=token>;</span> <span class=comment>// Top Right</span>
	<span class=identifier>v3</span> <span class=token>=</span> <span class="keyword keyword-new">new</span> <span class=identifier>Vector3</span><span class=token>(</span><span class=identifier>halfDistance</span><span class=token>,</span> <span class=identifier>halfWidth</span><span class=token>,</span> <span class="numeric numeric-literal">0</span><span class=token>)</span><span class=token>;</span> <span class=comment>// Bottom Right</span>
	<span class=identifier>v4</span> <span class=token>=</span> <span class="keyword keyword-new">new</span> <span class=identifier>Vector3</span><span class=token>(</span><span class=token>-</span><span class=identifier>halfDistance</span><span class=token>,</span> <span class=identifier>halfWidth</span><span class=token>,</span> <span class="numeric numeric-literal">0</span><span class=token>)</span><span class=token>;</span> <span class=comment>// Bottom Left</span>

	<span class="identifier identifier-variable">Matrix</span> <span class="identifier identifier-variable">m</span> <span class=token>=</span>
		<span class="identifier identifier-member-access">Matrix</span><span class=token>.</span><span class="identifier identifier-member-access">Identity</span> <span class=token>*</span>
		<span class="identifier identifier-invocation">Matrix</span><span class=token>.</span><span class="identifier identifier-invocation">CreateRotationZ</span><span class=token>(</span><span class="identifier identifier-invocation">angle</span><span class=token>)</span> <span class=token>*</span>
		<span class="identifier identifier-invocation">Matrix</span><span class=token>.</span><span class="identifier identifier-invocation">CreateTranslation</span><span class=token>(</span><span class="identifier identifier-invocation">destination</span><span class=token>)</span><span class=token>;</span>

	<span class=identifier>v1</span> <span class=token>=</span> <span class="identifier identifier-invocation">Vector3</span><span class=token>.</span><span class="identifier identifier-invocation">Transform</span><span class=token>(</span><span class="identifier identifier-invocation">v1</span><span class=token>,</span> <span class="identifier identifier-invocation">m</span><span class=token>)</span><span class=token>;</span>
	<span class=identifier>v2</span> <span class=token>=</span> <span class="identifier identifier-invocation">Vector3</span><span class=token>.</span><span class="identifier identifier-invocation">Transform</span><span class=token>(</span><span class="identifier identifier-invocation">v2</span><span class=token>,</span> <span class="identifier identifier-invocation">m</span><span class=token>)</span><span class=token>;</span>
	<span class=identifier>v3</span> <span class=token>=</span> <span class="identifier identifier-invocation">Vector3</span><span class=token>.</span><span class="identifier identifier-invocation">Transform</span><span class=token>(</span><span class="identifier identifier-invocation">v3</span><span class=token>,</span> <span class="identifier identifier-invocation">m</span><span class=token>)</span><span class=token>;</span>
	<span class=identifier>v4</span> <span class=token>=</span> <span class="identifier identifier-invocation">Vector3</span><span class=token>.</span><span class="identifier identifier-invocation">Transform</span><span class=token>(</span><span class="identifier identifier-invocation">v4</span><span class=token>,</span> <span class="identifier identifier-invocation">m</span><span class=token>)</span><span class=token>;</span>

	<span class="identifier identifier-invocation">DrawQuad</span><span class=token>(</span><span class="identifier identifier-invocation">v1</span><span class=token>,</span> <span class="identifier identifier-invocation">c1</span><span class=token>,</span> <span class="identifier identifier-invocation">v2</span><span class=token>,</span> <span class="identifier identifier-invocation">c2</span><span class=token>,</span> <span class="identifier identifier-invocation">v3</span><span class=token>,</span> <span class="identifier identifier-invocation">c2</span><span class=token>,</span> <span class="identifier identifier-invocation">v4</span><span class=token>,</span> <span class="identifier identifier-invocation">c1</span><span class=token>)</span><span class=token>;</span>
<span class=token>}</span>
<span class=token></span></span></code></pre><p>I've left a lot of fluff code out. I usually check if the line is a width of 1 and draw a normal line. I also left out the code on how to draw a quad as that can be found many other places already.</div></div></div><div class=clear></div></main></div><script>document.getElementById("navbar-toggler").onclick=function(){document.getElementById("navbarSupportedContent").classList.toggle("collapse")}</script>